<ng-container *ngIf="isDeleting">
  <div
    class="fixed left-0 top-0 z-40 flex h-full w-full items-center justify-center bg-dark-background-tertiary/70"
  >
    <div
      style="font-family: 'Orbitron'"
      class="flex flex-col items-center rounded-md border-2 border-font-main border-opacity-25 bg-dark-background-secondary p-4"
    >
      <p class="text-center">
        Are you sure <br />
        you want to delete
      </p>
      <p>{{ itineraryItem.name }} ?</p>
      <div
        class="flex w-full justify-between px-6 text-lg text-blue-green-main"
      >
        <div>
          <button aria-label="yes" (click)="deleteItem()" class="w-1/2">
            Yes
          </button>
        </div>
        <div>
          <button aria-label="no" (click)="cancelDeletingItem()" class="w-1/2">
            No
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-container>

<div
  name="item-listing-container"
  class="mx-4 my-4 flex cursor-pointer flex-col items-center rounded-md bg-blue-green-main/10 lg:ml-2"
>
  <div name="trip-heading" class="flex w-full justify-between py-2 text-lg">
    <button
      aria-label="edit-item"
      (click)="toggleUpdating()"
      [class.hidden]="!isEditing"
      class="my-auto ml-4 flex h-9 w-9 items-center justify-center rounded-full bg-dark-background-secondary/80 text-xl"
    >
      <span nz-icon nzType="edit" nzTheme="outline"></span>
    </button>
    <app-tag-icon-display
      [class.hidden]="isEditing"
      class="my-auto ml-4"
      [tag]="itineraryItem.tag"
    >
    </app-tag-icon-display>
    <p
      [class.hidden]="isUpdating"
      class="m-0 my-auto text-center"
      style="font-family: 'Orbitron'"
    >
      {{ itineraryItem.name }}
    </p>
    <div
      [class.hidden]="!isUpdating"
      class="flex items-center justify-center px-2"
    >
      <input
        type="text"
        [placeholder]="itineraryItem.name"
        [(ngModel)]="updatedItemName"
        class="h-full w-32 rounded-l-md bg-slate-200 pl-2 text-sm text-dark-background-tertiary"
      />

      <button
        aria-label="update"
        (click)="updateItem()"
        class="h-full rounded-r-md bg-blue-green-main/60 px-2 text-sm text-dark-background-tertiary hover:bg-opacity-40 hover:text-font-main"
      >
        Update
      </button>
    </div>

    <button
      aria-label="delete-trip"
      [class.hidden]="!isEditing"
      (click)="toggleDeletingItem()"
      class="my-auto mr-4 flex h-9 w-9 items-center justify-center rounded-full bg-dark-background-secondary/80 text-xl"
    >
      <svg
        class="text-red-500"
        stroke="currentColor"
        fill="currentColor"
        stroke-width="0"
        viewBox="0 0 1024 1024"
        height="1em"
        width="1em"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"
        ></path>
      </svg>
    </button>
    <app-tag-icon-display
      [class.hidden]="isEditing"
      class="my-auto mr-4"
      [tag]="itineraryItem.tag"
    ></app-tag-icon-display>
  </div>
  <div
    name="seperator"
    class="mb-1 w-10/12 border-t-2 border-dashed border-font-main border-opacity-30"
  ></div>
  <div name="details" class="flex w-full flex-wrap p-2 px-7 text-xs">
    <div name="cost" class="flex w-1/2 flex-col items-center">
      <p class="m-0 font-bold text-blue-green-main">Cost:</p>
      <p class="mb-2">R {{ itineraryItem.cost }}</p>
    </div>
    <div name="Duration" class="flex w-1/2 flex-col items-center">
      <p class="m-0 font-bold text-blue-green-main">Duration:</p>
      <p class="mb-2">{{ duration }}</p>
    </div>
    <div name="Start" class="flex w-1/2 flex-col items-center">
      <p class="m-0 font-bold text-blue-green-main">Start Date:</p>
      <p class="mb-2">{{ formattedStartDate }}</p>
    </div>
    <div name="End" class="flex w-1/2 flex-col items-center">
      <p class="m-0 font-bold text-blue-green-main">End Date:</p>
      <p class="mb-2">{{ formattedEndDate }}</p>
    </div>
  </div>
  <div
    name="seperator"
    class="mb-1 w-10/12 border-t-2 border-dashed border-font-main border-opacity-30"
  ></div>
  <div>
    <button
      (click)="toggleEditing()"
      class="mb-3 mt-2 w-32 rounded-md bg-blue-green-main/70 p-2 text-dark-background-tertiary hover:bg-opacity-40 hover:text-font-main"
    >
      <p class="m-0">{{ isEditing ? "Done" : "Alter Item" }}</p>
    </button>
  </div>
</div>
